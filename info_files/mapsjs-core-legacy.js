
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.30.3/HERE_NOTICE
 */

H.util.eval("function bo(a,b){if(!a)throw new D(bo,0,a);bo.l.constructor.call(this,a);this.b={};this.c=b&&b.xc;this.f=co++}u(bo,km);var co=0;\nbo.prototype.V=function(a,b,c,d,e,f){var g=xd(d),h=this.hb,k=g+(c.exp-h.pixelProjection.exp),l=h.min,m=h.max;d=h.tileSize;var p=h.ga().j,q=this.xb,r=q.dd();var v=q.Db().w;var w=c.w,z=c.x,J=c.y,G={};if(g<l||g>m)return jk.DONE;e=h.requestTiles(a,k,e,f,this.f);a=e.total;e=e.tiles;f=e.length;this.g=c;this.j=b;this.a=k;r!==p&&q.qc(p);c=d=d*w/(Dd(2,k)*d);this.c||(d%1&&(d=yd(d),w=c/d,z/=w,J/=w,w=Dd(2,k)*d),z=yd(z),J=yd(J));this.i=c;k=-d;g=v+d;for(h=0;h<f;h++){v=e[h];if((l=v.data)&&l.tagName){c=b.x-(z-v.x*\nd);p=b.y-(J-v.y*d);q.Zc(l,c,p,d,d);for(r=c;(r-=w)>k;)q.Zc(l,r,p,d,d);for(r=c;(r+=w)<g;)q.Zc(l,r,p,d,d)}G[this.a+\"_\"+v.x+\"_\"+v.y]=v}this.b=G;return f===a?jk.DONE:jk.PENDING};bo.prototype.Ga=function(a,b,c){var d=this.i,e=d/this.hb.tileSize,f=this.g,g=this.j,h;if(tc(this.a)&&f){a=f.x+(a-g.x);b=f.y+(b-g.y);var k=yd(f.w/d);var l=f=yd(a/d);g=yd(b/d);Ad(l)>=k&&(l%=k);0>l&&(l=k+l);(k=this.b[this.a+\"_\"+l+\"_\"+g])&&k.Ga&&(h=k.Ga((a-d*f)/e,(b-d*g)/e,c))}return h||ff};bo.prototype.ie=function(){return\"2d\"};function eo(a,b){b=b||{};C(a,ml,eo,0);eo.l.constructor.call(this,a);this.xc=!!b.xc;this.c=b.ib||0;this.a=[];this.b={}}u(eo,km);\neo.prototype.V=function(a,b,c,d,e,f){var g,h=this.hb,k;d-=this.c;this.a.length=0;var l=this.b;this.b=g={};if(d>=h.min&&d<=h.max){var m=h.Hd(a,d,e,f);var p=m.overlays;if(a=p.length)for(p.sort(Rg),d=this.xb,e=this.xc,f=0;f<a;f++){h=p[f];var q=h.G();var r=c.lb(q.Rb());var v=c.lb(q.Nb());q=c.w;r.x>=v.x&&(r.x-=q);q=-((r.x+v.x)/q>>1)*q;r.x+=q;r.add(b);v.x+=q;v.add(b);e||(r.round(),v.round());(q=l[k=h.gb()])?delete l[k]:q={Oo:h};g[k]=q;var w=r.x;r=r.y;var z=v.x;v=v.y;var J=z-w;var G=v-r;d.qc(h.dd());d.Zc(h.ad(),\nw,r,J,G);q.mh?q.mh.set(w,r,z,v):q.mh=new lk(w,r,z,v);this.a.push(q)}}return!m||m.requested&&m.requested===m.total||!m.requested&&p.length===m.total?jk.DONE:jk.PENDING};eo.prototype.Ga=function(a,b,c){for(var d=this.a,e=d.length,f,g,h;e--;)if(f=d[e],g=f.mh,g.Pf(a,b))if(f=f.Oo,h)h.push(f);else if(h=[f],c)break;return h||ff};eo.prototype.ie=function(){return\"2d\"};eo.prototype.u=function(){this.a=null;eo.l.u.call(this)};var fo={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:ul.ZOOM,COORD:ul.COORD},capture:!0};t(\"H.map.render.p2d.capabilities\",fo);function go(a,b){this.a=[];go.l.constructor.apply(this,arguments)}u(go,om);n=go.prototype;n.Nj=function(){return this.hb.Lc.apply(this.hb,arguments)};n.V=function(a,b,c,d,e,f,g){this.a=[];return go.l.V.apply(this,arguments)};n.Ck=1;n.jl=function(a,b,c,d,e,f){var g=this.Ck=d.$a();e*=g;f*=g;var h=c.Db();b=h.w*g;h=h.h*g;var k=c.ud();this.xc?(e-=k.x*g,f-=k.y*g):(e=xd(e-k.x*g),f=xd(f-k.y*g));d.Zc(c.ad(),e,f,b,h);a.detail?a.detail.set(e,f,e+b,f+h):a.detail=new lk(e,f,e+b,f+h);this.a.push(a)};\nn.Ga=function(a,b,c){for(var d=this.a,e=d.length,f,g,h,k=ff,l=this.Ck;e--&&!(f=d[e],g=f.detail,g.Pf(a,b)&&(f=f.Mk,(!(h=f.Cb().g)||h.hg((a-g.left)/l,(b-g.top)/l,0))&&0>k.indexOf(f)&&(k===ff&&(k=[]),k.push(f),c))););return k};n.ie=function(){return\"2d\"};n.u=function(){this.a=null;go.l.u.call(this)};function V(a,b,c,d){V.l.constructor.call(this,a,b,c,d);this.N=new I(0,0);if(c=d.renderBaseBackground)this.to=c.lower,this.no=c.higher;this.mo=!!d.enableSubpixelRendering;this.od=ho;this.Oj=0;this.Ne=this.Mj=!1;this.i=new Wl;this.a=d=new dm;this.Pd=A(this.Pd,this);d.addEventListener(d.g.Rg,this.Pd);this.Fa=A(this.Fa,this);d=a.element;this.Aa=a=d.ownerDocument.createElement(\"div\");a.style.position=\"absolute\";a.style.width=a.style.height=\"100%\";a.style.zIndex=0;d.insertBefore(a,d.firstChild);this.ik=\nnew Am(this.Aa,this.sa);this.o=[];io(this);this.bi=A(V.prototype.bi,this);this.A=jo;this.Cg();this.zoom=ko(this,this.O.vb()+this.ib);this.Jb();lo(this,b.mb().position,this.zoom);this.bb();this.U()}u(V,ql);t(\"H.map.render.p2d.RenderEngine\",V);V.prototype.type=Al.P2D;V.prototype.type=V.prototype.type;var jo=2;V.prototype.getState=function(){return this.A};V.prototype.getState=V.prototype.getState;function mo(a,b,c){b=c-b;return Ad(b)<a.ra.w/2?b:b-a.ra.w*c/Ad(c)}\nV.prototype.bh=function(a){var b=this,c=a.b,d=a.newValue,e=a.modifiers;a=d.position;var f=d.bounds,g,h=this.zoom,k=this.m,l=0;e&Si.POSITION&&(g=b.ra.lb(a));if(e&Si.BOUNDS)d=no(this,f.G(),e&Si.ZOOM?d.zoom:B,e&Si.POSITION?a:B),this.O.$b(d,c);else{e&Si.POSITION||(g=b.ra.lb(d.position));var m=g.x;var p=g.y;oo(this);this.N.set(0,0);d=po(this,d);var q=d.zoom;var r=d.position;if(c){var v=q-h;var w={x:k.x,y:k.y};c=this.ra.qe(w).x;var z=this.ra.projection.$c(a);if(z.x!==this.m.x||z.y!==this.m.y||q!==this.zoom)m=\nmo(this,c,m),qo(this,function(J){var G=J-l;if(q!==h){g=b.ra.qe(z);var U=b.ra.qe(w);m=mo(b,U.x,g.x);p=g.y-U.y}l=J;ro(b,m*G,p*G);h+=v*G;so(b,h);b.bb();b.ha()},this.kb,function(){lo(b,r,q);so(b,q);b.bb(r);b.ha()},this.dc)}else to(this),lo(this,r,q),so(this,q),this.bb(r);this.ha()}};V.prototype.kb=300;V.prototype.Fg=function(a){var b=Cc(a);if(!b||b&&0>a)throw new D(this.Fg,1,\"positive number required\");this.kb=a};V.prototype.setAnimationDuration=V.prototype.Fg;V.prototype.sh=function(){return this.kb};\nV.prototype.getAnimationDuration=V.prototype.sh;V.prototype.dc=Nl;V.prototype.Gg=function(a){if(!Ca(a))throw new D(this.Gg,1,\"function required\");this.dc=a};V.prototype.setAnimationEase=V.prototype.Gg;V.prototype.th=function(){return this.dc};V.prototype.getAnimationEase=V.prototype.th;V.prototype.Cg=function(){this.dc=Nl;this.kb=300};V.prototype.resetAnimationDefaults=V.prototype.Cg;\nV.prototype.oi=function(a,b,c){var d;this.Xa=zk();(d=this.fa.ja.splice(a,1)[0])&&d.B&&d.B();(d=this.s.ja.splice(a,1)[0])&&d.B&&d.B();(d=this.W.ja.splice(a,1)[0])&&d.B&&d.B();(d=this.ma.ja.splice(a,1)[0])&&d.B&&d.B();this.f=this.c.Na();0===a&&(vl(this,b,!1),this.Jb());this.o=Bm(this.ik,uo(this),vo(this));this.te();c||this.ha()};function io(a){var b=a.c.Na(),c=0,d=b.length;[a.fa={},a.s={},a.W={},a.ma={}].forEach(function(e){e.Yc=[];e.ja=[]});for(a.f=a.c.Na();c<d;c++)a.jf(c,b[c]);a.Jb()}\nV.prototype.pi=function(){this.Jb();this.ha()};V.prototype.Mh=function(a,b,c){var d,e,f,g;if(b){var h={xc:this.mo,ib:this.ib};b.V?C(b,mm)?e=new lm(b):C(b,ym)&&(g=new lm(b)):(b.requestOverlays&&(d=new eo(b,h)),b.requestTiles&&(e=new bo(b,h)),b.requestMarkers&&(f=new go(b,h)),b.requestDomMarkers&&(g=new rm(b,h)))}c=c||0;this.fa.ja.splice(a,c,d);this.s.ja.splice(a,c,e);this.W.ja.splice(a,c,f);this.ma.ja.splice(a,c,g);this.f=this.c.Na();this.o=Bm(this.ik,uo(this),vo(this))};\nfunction vo(a){var b=[];b=b.concat(a.s.ja);b=b.concat(a.fa.ja);b=b.concat(a.W.ja);b=b.concat(a.ma.ja);return b=b.filter(tc)}function po(a,b){var c=wl(a,wl(a,b.zoom)+a.ib);a=xl(a,b);a.zoom=c;return a}function lo(a,b,c){var d=a.ra;d.Qa(c);a.m=d.projection.$c(b);d.x=d.w*a.m.x;d.y=d.h*a.m.y}V.prototype.Wa=function(a,b){var c=this.g.center,d=this.sa;return this.ra.Sa((a-c.x)*d,(b-c.y)*d)};V.prototype.screenToGeo=V.prototype.Wa;V.prototype.Eg=function(a,b){a=this.Wa(a,b);b=this.O.mb();b.position=a;return b};\nV.prototype.Fa=function(a){var b=this.sa,c=this.g.center,d=c.x*b;c=c.y*b;a=this.ra.lb(a);var e=this.ra.w;return new I(xd((a.x-xd(a.x/e)*e+d)/b),xd((a.y+c)/b))};V.prototype.geoToScreen=V.prototype.Fa;V.prototype.G=function(a,b){var c=this.yb[a||4];a=this.ra;var d=c.left-b,e=a.Sa(d,c.top-b),f=c.right+b;b=a.Sa(f,c.bottom+b);f-d>=a.w&&(e.lng=-(b.lng=180));return dg(e,b)};\nV.prototype.Ga=function(a,b,c,d){var e=[],f=this.sa,g;a*=f;b*=f;f=[this.fa,this.s,this.W,this.ma];for(g=f.length;g--&&(!c||!e.length);){for(var h=e,k=f[g].ja,l=a,m=b,p=c,q=k.length;q--&&!((e=k[q])&&e.Ga&&(h=h.concat(e.Ga(l,m,p)),h.length&&p)););e=h}d(e)};V.prototype.getObjectsAt=V.prototype.Ga;V.prototype.ec=y;function uo(a){a=a.yb[2];return{w:a.right-a.left,h:a.bottom-a.top}}\nV.prototype.U=function(){var a=this.o.length,b;V.l.U.call(this);var c=uo(this);this.N.set(0,0);var d=c.w;for(b=c.h;a--;){c=this.o[a];var e=c.Db();e.w===d&&e.h===b||c.yf(d,b)}this.ec=new Ki(d,b);this.ha()};V.prototype.getCapabilities=function(){return fo};V.prototype.getCapabilities=V.prototype.getCapabilities;function wo(a){a.b&&a.b.va()||zk()-a.Xa<a.od&&!a.v?a.Vd=Jk(a.bi):(a.v&&(a.te(),xo(a)),a.A=jo)}n=V.prototype;\nn.te=function(){this.fa.Yc.length=0;this.s.Yc.length=0;this.W.Yc.length=0;this.ma.Yc.length=0};\nn.bi=function(){var a;this.C&&this.C.before();var b=this.s.ja;var c=this.g.center.clone().scale(this.sa).round();var d=this.G(1,0);var e=this.G(1,yo);var f=this.zoom;var g=f-this.ib;var h=this.ra;var k=this.to;var l=this.no;var m=b[0];b=this.N;var p=this.o.length;var q=this.f;for(a=q.length;p--;){var r=this.o[p];C(r,jm)&&r.clear()}if(m){if(k)for(;k;)p=f-k,m.V(d,c,h,p,!0,b),--k;if(l&&this.Ne)for(r=1;r<=l&&(p=f+r,h.Qa(p),k=this.G(2,0),h.Qa(f),!m.V(k,c,h,p,!0,b));r++);}for(this.od=ho;a--;)h=q[a],C(h,\naj)&&h.ga()&&h.ga().nf(e,g);d=this.Bk(d,c,f,!1,b,zo,this.s,this.fa);c=this.Bk(e,c,g,!1,b,Ao,this.W,this.ma);this.v=d&&c;this.b&&this.b.va()&&this.Sg();this.J||(this.J=this.O.mb());this.J.bounds=this.G(4,0);this.O.bb(this.J);this.J=null;this.ec&&(this.g.bb(this.ec),this.ec=y);f<this.Oj?this.Ne=!0:this.Mj&&(this.Ne=!1);this.Oj=f;this.Mj=d;this.C&&this.C.after();wo(this)};\nn.Bk=function(a,b,c,d,e,f,g){var h=Array.prototype.slice.call(arguments,6),k=h.length,l=h[0].ja.length,m=k*l,p=!!m,q;for(q=0;q<m;q++){if(f===zo){var r=q%k;var v=Math.floor(q/k)}else r=Math.floor(q/l),v=q%l;var w=h[r].ja[v];r=h[r].Yc;w&&(w=w.V(a,b,this.ra,c,d,e,this.Fa),w===jk.ACTIVE&&(this.od=Infinity),w!==jk.DONE||r[v]||(xo(this,this.f[v]),r[v]=!0),r[v]||(p=!1))}return p};function xo(a,b){a.dispatchEvent({type:a.zk.pj,target:b||a})}\nn.u=function(){var a=this.c.Na()[0],b=this.g;Kk(this.Vd);to(this,!0);a&&vl(this,a,!1);vo(this).forEach(function(c){c.B()});b.element&&b.element.removeChild(this.Aa);this.Aa=null;this.A=3;V.l.u.call(this)};n.ha=function(){this.Xa=zk();this.A===jo&&(this.v=!1,this.A=1,wo(this))};function Bo(a,b,c){ro(a,b*a.sa,c*a.sa);a.N.set(0,0);a.bb();a.ha()}function ro(a,b,c){var d=a.ra;a=a.m;d.x=Wd(d.x+b,d.w);d.y=wd(0,vd(d.w,d.y+c));a.x=d.x/d.w;a.y=d.y/d.h}\nn.Ae=function(a,b,c){a=wl(this,wl(this,a)+this.ib);so(this,a,b,c)};V.prototype.zoomAt=V.prototype.Ae;function so(a,b,c,d){var e=a.sa,f=a.g.center;c===+c&&d===+d?(c=(c-f.x)*e,d=(d-f.y)*e,a.N.set(c,d),ro(a,c,d),a.ra.Qa(b),ro(a,-c,-d)):(a.N.set(0,0),a.ra.Qa(b));a.zoom=b;a.bb();a.ha()}\nfunction no(a,b,c,d){var e=a.getCapabilities().lookAt.zoom.max,f=b.fb(),g=d||f;if(b.jg()||c&&d)c=c===B?e:c;else{var h=new Yi(a.ra.projection);h.Qa(e);var k=h.lb(b.Rb()).round();var l=h.lb(b.Nb()).round();e=h.w;b.Gb()&&(k.x-=e);d?(f=h.lb(g),b=2*wd(f.x-k.x,l.x-f.x),k=2*wd(f.y-k.y,l.y-f.y)):(b=l.x-k.x,k=l.y-k.y,g=f);c===B&&(f=a.yb[4],c=f.right-f.left,f=f.bottom-f.top,c=-8+vd(Bd(c/b*e)/Ld,Bd(f/k*e)/Ld)-a.ib,c=wl(a,c))}return{zoom:yd(c),position:g}}\nfunction oo(a){to(a,!0);a.a.va()&&a.Ab(!0);a.i.va()&&a.Bb(!0);to(a,!0)}V.prototype.uc=function(a,b){oo(this);Co(this,b);this.i.start(a,!!b)};V.prototype.startInteraction=V.prototype.uc;function Co(a,b){if(b){var c={};c.mf=b.power;c.Oe=b.ease;c.duration=b.duration;a.j=c}}function ko(a,b){return wl(a,wl(a,b-a.ib)+a.ib)}\nV.prototype.lc=function(a,b,c,d,e){var f=!1;this.i.va()&&(b=this.i.store(a,b,c,d,e),this.i.Hc(ul.COORD)&&(a=this.i.ce(),0<Vl(a)&&(Bo(this,-a.x,-a.y),f=!0)),b&&this.i.Hc(ul.ZOOM)&&(a=this.i.Wf(),b=this.i.Xf(),b=Bd(Dd(2,this.zoom)*b)/Ld,b!==this.zoom&&(b=ko(this,b),so(this,b,a.x,a.y),f=!0)),f&&this.ha())};V.prototype.interaction=V.prototype.lc;\nV.prototype.Bb=function(a){var b=this;if(this.i.va()&&!a){if(this.j){a=this.i.Eb();var c=this.i.zc();var d=this.j.duration;var e=(this.j.mf||1)*a;var f=new zm(-e/(0<d?d:1),e);!E(c.x)&&!E(c.y)&&0<e&&b.i.Hc(ul.COORD)&&qo(this,function(g){e=f.We(g*d);E(e)||Bo(b,xd(-c.x*e),xd(-c.y*e))},d,void 0,this.j.Oe)}this.j=null;this.i.clear()}};V.prototype.endInteraction=V.prototype.Bb;V.prototype.tc=function(a,b,c){oo(this);this.a.start(b,c);Co(this,a)};V.prototype.startControl=V.prototype.tc;\nV.prototype.control=function(a,b,c){if(E(+c))throw new D(this.control,2,c);if(E(a))throw new D(this.control,0,a);if(E(b))throw new D(this.control,1,b);this.a.va()&&this.a.set(a,b,c,0,0,0)};V.prototype.control=V.prototype.control;\nV.prototype.Ab=function(a,b){var c=this,d;if(this.a.va()){to(this,!0);var e=zk();var f=e-this.za;if(1<=f){var g=gm(this.a);Do(this,g,f)}if(!this.j||a||b)\"function\"===typeof b&&(a=this.mb(),a.zoom=this.zoom-this.ib,b(a),a.zoom+=this.ib,Eo(this,a));else{b=this.a.Eb();var h=this.a.zc();var k=this.j.duration;var l=(this.j.mf||1)*b;var m=new zm(-l/(0<k?k:1),l);!E(h.nb)&&!E(h.ob)&&0<l&&qo(this,function(p,q,r,v){e&&(r=v-e,e=0);l=m.We(p*k)*r;E(l)||((d=h.pb*l)&&so(c,ko(c,c.zoom+d),c.a.b,c.a.c),Bo(c,xd(h.nb*\nl),xd(h.ob*l)))},k,void 0,this.j.Oe)}this.a.reset()}};V.prototype.endControl=V.prototype.Ab;\nfunction Eo(a,b){var c=a.m,d=a.ra.projection.$c(b.position),e=a.ra.qe(d),f=e.y;e=e.x;var g=b.zoom;c=a.ra.qe(c);b=c.y;var h=c.x;c=a.zoom;var k=a.a.Eb(),l=a.a.b,m=a.a.c,p=0;e=mo(a,h,e);e-=h;f-=b;c=g-c;b=Cd(e*e+f*f+c*c);if(0!==k&&0!==b){var q=e/b;var r=f/b;var v=c/b;var w=k*k/(2*b);qo(a,function(z,J){var G;if(1!==z){z=k*J-w*J*J/2;J=z-p;if(G=v*J)G=ko(a,a.zoom+G),so(a,ko(a,G),l,m);Bo(a,xd(q*J),xd(r*J));p=z}else a.m=d,so(a,ko(a,g),l,m),a.bb(),a.ha()},2*b/k)}}\nV.prototype.Pd=function(a){var b=this,c=a.c;this.N.set(0,0);c.nb||c.ob||c.pb?(this.za=zk(),qo(this,function(d,e,f,g){b.za=g;Do(b,c,f)},Number.POSITIVE_INFINITY),this.ha()):to(this,!0)};function Do(a,b,c){c=c||0;b.pb&&so(a,ko(a,a.zoom+b.pb*c),a.a.atX,a.a.atY);Bo(a,b.nb*c,b.ob*c)}function qo(a,b,c,d,e){a.b&&a.b.va()&&a.b.stop(!0);a.b=new nm(a,b,c,d,e);a.b.start()}function to(a,b){a.b&&a.b.va()&&a.b.stop(b)}V.prototype.nh=function(){};V.prototype.enter=V.prototype.nh;\nV.prototype.Vf=function(a){tl(this.Aa,a)};V.prototype.exit=V.prototype.Vf;V.prototype.capture=function(a,b,c,d){var e=this.Aa.ownerDocument.createElement(\"canvas\"),f=e.getContext(\"2d\"),g=this.sa;e.width=(c-a)*g;e.height=(d-b)*g;for(c=0;c<this.o.length;c++)d=this.o[c],C(d,jm)&&f.drawImage(d.L(),-a*g,-b*g);return Wb(e)};var Ao=0,zo=1,ho=1E3,yo=256;\n");